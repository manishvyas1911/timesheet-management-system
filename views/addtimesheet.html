<!DOCTYPE html>
<html>
<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Timesheet Management System</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. We have chosen the skin-blue for this starter
        page. However, you can choose any other skin. Make sure you
        apply the skin class to the body tag so the changes take effect. -->
 <link rel="stylesheet" href="plugins/datepicker/datepicker3.css">
  <link rel="stylesheet" href="dist/css/skins/skin-blue.min.css">
 <link rel="stylesheet" href="plugins/fullcalendar/fullcalendar.min.css">
  <link rel="stylesheet" href="plugins/fullcalendar/fullcalendar.print.css" media="print">
  
    <!-- DataTables -->
  <link rel="stylesheet" href="plugins/datatables/dataTables.bootstrap.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Google Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
         
  <style>
td{
  max-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
</style>  
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">

  <header class="main-header">

    <!-- Logo -->
    <a href="home.html" class="logo">
      <!-- mini logo for sidebar mini 50x50 pixels -->
      <span class="logo-mini"><b>T</b>MS</span>
      <!-- logo for regular state and mobile devices -->
      <span class="logo-lg"><b>T M </b>System</span>
    </a>

    <!-- Header Navbar -->
    <nav class="navbar navbar-static-top" role="navigation">
      <!-- Sidebar toggle button-->
      <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
        <span class="sr-only">Toggle navigation</span>
      </a>
      <!-- Navbar Right Menu -->
      <div class="navbar-custom-menu">
        <ul class="nav navbar-nav">
          
          <!-- /.messages-menu -->

          <!-- Notifications Menu -->
         
          <!-- Tasks Menu -->
          
          <!-- User Account Menu -->
          <li class="dropdown user user-menu">
            <!-- Menu Toggle Button -->
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <!-- The user image in the navbar-->
              <img src="dist/img/user2-160x160.jpg" class="user-image" alt="User Image">
              <!-- hidden-xs hides the username on small devices so only the image appears. -->
              <span class="hidden-xs"><%=first_name +" "+last_name %></span>
            </a>
            <ul class="dropdown-menu">
              <!-- The user image in the menu -->
              <li class="user-header">
                <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">

              </li>
              <!-- Menu Body -->
            
              <!-- Menu Footer-->
              <li class="user-footer">
                <div class="pull-left">
                  <a href="#" class="btn btn-default btn-flat">Profile</a>
                </div>
                <div class="pull-right">
                  <a href="LogOut" class="btn btn-default btn-flat">Sign out</a>
                </div>
              </li>
            </ul>
          </li>
         
        </ul>
      </div>
    </nav>
  </header>
  
  <!-- Left side column. contains the logo and sidebar -->
  <aside class="main-sidebar">

    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar">


      <!-- Sidebar Menu -->
      <ul class="sidebar-menu" data-widget="tree">
        <li class="header">Menu</li>
      
        <li><a href="profile.html"><i class="fa fa-link"></i> <span>View Profile</span></a></li>
        
        <li class="treeview">
          <a href="#"><i class="fa fa-link"></i> <span>Timesheet</span>
            <span class="pull-right-container">
                <i class="fa fa-angle-left pull-right"></i>
              </span>
          </a>
          <ul class="treeview-menu">
            <li><a href="addtimesheet.html">Add Timesheet</a></li>
            <li><a href="viewtimesheet.html">View Timesheet</a></li>
          </ul>
        </li>
        
         <li><a href="employeesheet.html"><i class="fa fa-link"></i> <span>Review Employee Sheets</span></a></li>
        
      </ul>
      <!-- /.sidebar-menu -->
    </section>
    <!-- /.sidebar -->
  </aside>
  

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        Add Work
      </h1>
     
    </section>

    <!-- Main content -->
    <section class="content">

      <div class="row">
      
      
      
          <div class="nav-tabs-custom">
            <ul class="nav nav-tabs">
              <li class="active"><a href="#activity" data-toggle="tab">Dragon</a></li>
              <li><a href="#timeline" data-toggle="tab">Shield</a></li>
              <li><a href="#settings" data-toggle="tab">Magic</a></li>
            </ul>
            <div class="tab-content">
              <div class="active tab-pane" id="activity">
             	<div class="box box-solid">
				 <span id="save_msg" style="font-size: 20px;margin-left: 1%;"></span>
					 
					<div class="box-header with-border">
					 <h4 class="box-title">Select Time (please select time before filling)</h4>
					</div>
					
					 
					  
					<table class="table">
						<tbody>
							<tr>
								<th><label> <input type="radio" name="time"
										id="am1011" value="am1011" checked="" /> 10 AM -11 AM
								</label></th>
								<th><label> <input type="radio" name="time"
										id="am1112" value="am1112" /> 11 AM - 12 PM
								</label></th>
								<th><label> <input type="radio" name="time"
										id="pm1201" value="pm1201" /> 12 PM - 1 PM
								</label></th>
								<th><label> <input type="radio" name="time"
										id="pm0102" value="pm0102" /> 1 PM - 2 PM
								</label></th>
								<th><label> <input type="radio" name="time"
										id="pm0203" value="pm0203" /> 2 PM - 3 PM
								</label></th>
								<th><label> <input type="radio" name="time"
										id="pm0304" value="pm0304" /> 3 PM - 4 PM
								</label></th>
								<th><label> <input type="radio" name="time"
										id="pm0405" value="pm0405" /> 4 PM - 5 PM
								</label></th>
								<th><label> <input type="radio" name="time"
										id="pm0506" value="pm0506" /> 5 PM - 6 PM
								</label></th>
								<th><label> <input type="radio" name="time"
										id="pm0607" value="pm0607" /> 6 PM - 7 PM
								</label></th>
								<th><label> <input type="radio" name="time"
										id="extra" value="extra" /> EXTRA
								</label></th>
						</tbody>
					</table>
				</div>
				<div class="row">
        <div class="col-md-3">
        <div class="box box-solid">
            <div class="box-header with-border">
              <h4 class="box-title">Add Work</h4>
            </div>
            <div class="box-body">
              <!-- the events -->
              <div id="external-events">
                <div class="external-event bg-yellow ui-draggable ui-draggable-handle" style="position: relative;">Work on Functional part</div>
				<div class="external-event bg-aqua ui-draggable ui-draggable-handle" style="position: relative;">Work on UI part</div>
                <div class="external-event bg-green ui-draggable ui-draggable-handle" style="position: relative;">Lunch</div>
                <div class="external-event bg-blue ui-draggable ui-draggable-handle" style="position: relative;">In Meeting/events</div>
                <div class="external-event bg-red ui-draggable ui-draggable-handle" style="position: relative;">On Leave</div>
                <div class="checkbox">
                  <label for="drop-remove">
                    <input type="checkbox" id="drop-remove">
                    remove after drop
                  </label>
                </div>
              </div>
            </div>
            <!-- /.box-body -->
          </div>
          
          <!-- /. box -->
          <div class="box box-solid">
            <div class="box-header with-border">
              <h3 class="box-title">Create Work</h3>
            </div>
            <div class="box-body">
              <div class="btn-group" style="width: 100%; margin-bottom: 10px;">
                <!--<button type="button" id="color-chooser-btn" class="btn btn-info btn-block dropdown-toggle" data-toggle="dropdown">Color <span class="caret"></span></button>-->
                <ul class="fc-color-picker" id="color-chooser">
                  <li><a class="text-aqua" href="#"><i class="fa fa-square"></i></a></li>
                  <li><a class="text-blue" href="#"><i class="fa fa-square"></i></a></li>
                  <li><a class="text-light-blue" href="#"><i class="fa fa-square"></i></a></li>
                  <li><a class="text-teal" href="#"><i class="fa fa-square"></i></a></li>
                  <li><a class="text-yellow" href="#"><i class="fa fa-square"></i></a></li>
                  <li><a class="text-orange" href="#"><i class="fa fa-square"></i></a></li>
                  <li><a class="text-green" href="#"><i class="fa fa-square"></i></a></li>
                  <li><a class="text-lime" href="#"><i class="fa fa-square"></i></a></li>
                  <li><a class="text-red" href="#"><i class="fa fa-square"></i></a></li>
                  <li><a class="text-purple" href="#"><i class="fa fa-square"></i></a></li>
                  <li><a class="text-fuchsia" href="#"><i class="fa fa-square"></i></a></li>
                  <li><a class="text-muted" href="#"><i class="fa fa-square"></i></a></li>
                  <li><a class="text-navy" href="#"><i class="fa fa-square"></i></a></li>
                </ul>
              </div>
              <!-- /btn-group -->
              <div class="input-group">
                <input id="new-event" type="text" class="form-control" placeholder="Work Description">
            
                <div class="input-group-btn">
                  <button id="add-new-event" type="button" class="btn btn-primary btn-flat">Add</button>
                </div>
                
                
                <!-- /btn-group -->
              </div>
              
          <!-- /input-group -->
            </div>
            
           </div>
           
           <div class="box box-solid">
            <div id="calendarTrash"  class="calendar-trash box-header with-border">
              <h3 class="box-title">Remove</h3>
            </div>
            </div>
           
           
           
           <!-- [6-6-2017] -->
            <div class="box box-solid">
            <div class="box-header with-border">
              <h3 class="box-title">Save Timesheet</h3>
            </div>
             <div class="box-body">
              <div class="input-group">
               <!--  <input id="total-events" type="text" class="form-control" placeholder="Event List">
             -->
              <div class="btn-group" style="width: 100%; margin-bottom: 10px;">
             <div class="input-group-btn">
                  <button id="save-timesheet-event" type="button" class="btn btn-primary btn-flat">Save</button>
                </div>
                </div>
                </div>
                </div>
               </div>    
             
        </div>
        <!-- /.col -->
        <div class="col-md-9">
          <div class="box box-primary">
  <div class="box-body no-padding">
    <!-- THE CALENDAR -->
<div id="calendar" class="fc fc-ltr fc-unthemed">
	
</div>
</div>
            <!-- /.box-body -->
          </div>
          <!-- /. box -->
        </div>
        <!-- /.col -->
      </div>
      <!-- /.row -->
              </div>
              <!-- /.tab-pane -->
              <div class="tab-pane" id="timeline">
              
               <div class="box-body">
                <span id="save_msg_shield" style="font-size: 20px;margin-left: 1%;">Status</span>
				
              <table class="table table-bordered table-hover">
                <thead>
                            <tr>
								<td>Date</td>
								
						<td><input type="text" name="date"  class="form-control pull-right" id="datepicker" required></td>

							</tr>
                <tr>
                 
                 				<th>10 AM - 11 AM</th>
								<th>11 AM - 12 AM</th>
								<th>12 AM - 1 PM</th>
								<th>1 PM - 2 PM</th>
								<th>2 PM - 3 PM</th>
								<th>3 PM - 4 PM</th>
								<th>4 PM - 5 PM</th>
								<th>5 PM - 6 PM</th>
								<th>6 PM - 7 PM</th>
								<th>Extra Hours</th>
                </tr>
                </thead>
                <tbody>
                     
                <tr>
								<td><textarea form="myForm" id="sam1011" rows="10" cols="10"></textarea></td>                
	                            <td><textarea form="myForm" id="sam1112" rows="10" cols="10"></textarea></td>  
	                            <td><textarea form="myForm" id="spm1201" rows="10" cols="10"></textarea></td>  
	                            <td><textarea form="myForm" id="spm0102" rows="10" cols="10"></textarea></td>  
	                            <td><textarea form="myForm" id="spm0203" rows="10" cols="10"></textarea></td>  
	                            <td><textarea form="myForm" id="spm0304" rows="10" cols="10"></textarea></td>  
	                            <td><textarea form="myForm" id="spm0405" rows="10" cols="10"></textarea></td>  
	                            <td><textarea form="myForm" id="spm0506" rows="10" cols="10"></textarea></td>  
	                            <td><textarea form="myForm" id="spm0607" rows="10" cols="10"></textarea></td>  
	                            <td><textarea form="myForm" id="sextra" rows="10" cols="10"></textarea></td>  
	                         
                 
                </tr>
              
                </tbody>
                
              </table>
              
             <div class="row">
								<div class="col-xs-12">
				  <button id="save-timesheet-shield" type="button" class="btn btn-primary btn-flat">Save</button>
							
								</div>
							   </div>
			
            </div>
          
             
                
              </div>
              <!-- /.tab-pane -->

              <div class="tab-pane" id="settings">
               <h1><i class="fa fa-fw fa-optin-monster"></i>Coming Soon<i class="fa fa-fw fa-optin-monster"></i></h1>
              </div>
              <!-- /.tab-pane -->
            </div>
            <!-- /.tab-content -->
          </div>
          <!-- /.nav-tabs-custom -->
       
        <!-- /.col -->
      </div>
      <!-- /.row -->

    </section>
    <!-- /.content -->
  </div>

  <!-- Main Footer -->
  <footer class="main-footer">
    <!-- To the right -->
   
    <!-- Default to the left -->
    <strong>Copyright &copy; 2017 <a href="#">Advantal</a>.</strong> All rights reserved.
  </footer>


  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

<!-- jQuery 3.1.1 -->
<script src="plugins/jQuery/jquery-3.1.1.min.js"></script>
<!-- Page specific script -->

<script src="bootstrap/js/bootstrap.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<!-- Slimscroll -->
<script src="plugins/slimScroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- fullCalendar 2.2.5 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>

<script src="plugins/fullcalendar/fullcalendar.min.js"></script>

<script src="plugins/datepicker/bootstrap-datepicker.js"></script>

<!-- DataTables -->
<script src="../../plugins/datatables/jquery.dataTables.min.js"></script>
<script src="../../plugins/datatables/dataTables.bootstrap.min.js"></script>
<!-- Page specific script -->

<script>

	
  $(function () {
	  
	  
 
   var eventList = [];
	  
	  function findAndRemove(array, property,value,property2,value2) {
		  array.forEach(function(result, index) {
		    if(result[property] === value && result[property2]=== value2) {
		      //Remove from array
		      array.splice(index, 1);
		    }    
		  });
		}
	
    /* initialize the external events
     -----------------------------------------------------------------*/
    function ini_events(ele) {
      ele.each(function () {

        // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
        // it doesn't need to have a start or end
        var eventObject = {
          title: $.trim($(this).text()) // use the element's text as the event title
        };

        // store the Event Object in the DOM element so we can get to it later
        $(this).data('eventObject', eventObject);

        // make the event draggable using jQuery UI
        $(this).draggable({
          zIndex: 1070,
          revert: true, // will cause the event to go back to its
          revertDuration: 0  //  original position after the drag
        });

      });
    }

    ini_events($('#external-events div.external-event'));
    
  
    /* initialize the calendar
     -----------------------------------------------------------------*/
    //Date for the calendar events (dummy data)
    var date = new Date();
    var d = date.getDate(),
        m = date.getMonth(),
        y = date.getFullYear();
    
    
    $('#calendar').fullCalendar({
    	 header: {
          left: 'prev,next today',
          center: 'title',
          right:'' /*'month',agendaWeek,agendaDay' */
        },
        buttonText: {
          today: 'today',
          /* month: 'month',
           week: 'week',
          day: 'day' */
        },
        
        events: function(start, end, timezone, callback) {
        	 $.ajax({
				type: 'POST',
			    data:JSON.stringify({
				        start: start.unix(),
				        end: end.unix()
				    }),
		        contentType: 'application/json',
                   url: 'GetTags',						
		         success: function(doc) {	
		        	  var events = [];
		        	 var  data={};
		             
		             data['event']=[{title: 'hello1',start: new Date(1500143400*1000)},
		                            {title: 'hello2',start: new Date(1500143400*1000)}
		                  ];
		             console.log(data);
		            $.each(data.event, function(i, x) {
		           	 events.push({
		                      title: x.title,
		                      start: x.start // will be parsed
		                      }); 
		           	   
		            });
		             callback(events);   
		         
		            },
		                error: function(xhr, textStatus, errorThrown){
		                	$("#save_msg").text("Error Getting Tags.");
		                    $("#save_msg").css("color","red");
		           } 
        	});
		             
                
        	
        },
        //Random default events
       /*  events: [
                  {
                            title: 'hello',
                            start: new Date("2017-06-25"),
                            backgroundColor: "#3c8dbc", //Primary (light-blue)
                            borderColor: "#3c8dbc" //Primary (light-blue)
                         
                }  
        ], */
        editable: true,
        
      /*   eventDrop: function(event,dayDelta,minuteDelta,allDay,revertFunc) {
     
            alert(
                event.title + " was moved " +
                dayDelta + " days and " +
                minuteDelta + " minutes."
            );
            if (allDay) {
                alert("Event is now all-day");
            }else{
                alert("Event has a time-of-day");
            }

            if (!confirm("Are you sure about this change?")) {
              //  revertFunc();
            
            }
            
            for (var i=0; i<eventList.length; i++) {
            	  if (eventList[i].Id == 3) {
            		  eventList[i].Username = "Thomas";
            	    break;
            	  }
            	}
        
        }, */ 
        droppable: true, // this allows things to be dropped onto the calendar !!!
        /* eventClick: function(event, jsEvent, view) {

            alert('Event: ' + event.title);
            alert('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);
            alert('View: ' + view.name);

            // change the border color just for fun
            $(this).css('border-color', 'red');

        }, */
        /* dayClick: function (date, jsEvent, view) {
            $(".fc-state-highlight").removeClass("fc-state-highlight");
            $(jsEvent.target).addClass("fc-state-highlight");
         }, */
        eventDragStop: function(event,jsEvent) {
          
            var trashEl = jQuery('#calendarTrash');
            var ofs = trashEl.offset();

            var x1 = ofs.left;
            var x2 = ofs.left + trashEl.outerWidth(true);
            var y1 = ofs.top;
            var y2 = ofs.top + trashEl.outerHeight(true);

            if (jsEvent.pageX >= x1 && jsEvent.pageX<= x2 &&
                jsEvent.pageY >= y1 && jsEvent.pageY <= y2) {
                $('#calendar').fullCalendar('removeEvents',event._id);
                console.log(event._id);
               var date=event.start._d
               
               var dd = date.getDate();
               var mm = date.getMonth()+1; //January is 0!

               var yyyy = date.getFullYear();
               if(dd<10){
                   dd='0'+dd;
               } 
               if(mm<10){
                   mm='0'+mm;
               } 
               var mydate = dd+'/'+mm+'/'+yyyy;
               console.log(mydate);
                findAndRemove(eventList, 'title',event.title,'date',mydate);
           
                
            }
        },
        drop: function (date, allDay) { // this function is called when something is dropped

          // retrieve the dropped element's stored Event Object
        var originalEventObject = $(this).data('eventObject');
        
        // we need to copy it, so that multiple events don't have a reference to the same object
        var copiedEventObject = $.extend({}, originalEventObject);

        // assign it the date that was reported
        copiedEventObject.start = date;
        copiedEventObject.allDay = allDay;
        copiedEventObject.backgroundColor = $(this).css("background-color");
        copiedEventObject.borderColor = $(this).css("border-color");

       
      
        // render the event on the calendar
        // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
        $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);
        
        if ($('#am1011').is(':checked')) {
        	
        	timePeriod = $("#am1011").val() ; 
          }
        if ($('#am1112').is(':checked')) {
        	timePeriod = $("#am1112").val() ; 
         }
        if ($('#pm1201').is(':checked')) {
        	timePeriod = $("#pm1201").val() ; 
            }
        if ($('#pm0102').is(':checked')) {
        	timePeriod = $("#pm0102").val() ; 
           }
        if ($('#pm0203').is(':checked')) {
        	timePeriod = $("#pm0203").val() ; 
          }
        if ($('#pm0304').is(':checked')) {
        	timePeriod = $("#pm0304").val() ; 
         }
        if ($('#pm0405').is(':checked')) {
        	timePeriod = $("#pm0405").val() ; 
            }
        if ($('#pm0506').is(':checked')) {
        	timePeriod = $("#pm0506").val(); 
           }
        if ($('#pm0607').is(':checked')) {
        	timePeriod = $("#pm0607").val() ; 
          }
        if ($('#extra').is(':checked')) {
        	timePeriod = $("#extra").val() ; 
         }
        var eventArr = {}; 
        eventArr['time']=timePeriod; 
        eventArr['date'] = date.format("DD/MM/YYYY");
        eventArr['title'] = originalEventObject.title;
        
        //$("#total-events").val(JSON.stringify(eventArr));
        eventList.push(eventArr);
        
       
      //after 7     
    /*  $('#total-events').val($('#total-events').val()+
                             "{'time':'"+timePeriod+
                             "','date':'"+date.format("DD/MM/YYYY")+
                             "','title':'"+originalEventObject.title+"'},"); */
     
     // is the "remove after drop" checkbox checked?
   
    		 
        if ($('#drop-remove').is(':checked')) {
          // if so, remove the element from the "Draggable Events" list
          $(this).remove();
        }
  
      }
    });

    /* ADDING EVENTS */
    var currColor = "#3c8dbc"; //Red by default
    //Color chooser button
    var colorChooser = $("#color-chooser-btn");
    $("#color-chooser > li > a").click(function (e) {
      e.preventDefault();
      //Save color
      currColor = $(this).css("color");
      //Add color effect to button
      $('#add-new-event').css({"background-color": currColor, "border-color": currColor});
    });
    $("#add-new-event").click(function (e) {
      e.preventDefault();
      //Get value and make sure it is not null
      var val = $("#new-event").val();
      if (val.length == 0) {
        return;
      }

      //Create events
      var event = $("<div />");
      event.css({"background-color": currColor, "border-color": currColor, "color": "#fff"}).addClass("external-event");
      event.html(val);
      $('#external-events').prepend(event);

      //Add draggable funtionality
      ini_events(event);

      //Remove event from text input
      $("#new-event").val("");
    });
    
    $('#save-timesheet-event').click(function(e){
   		//var calen=$('#total-events').val()
   		
   		$.ajax({
					type: 'POST',
					data: JSON.stringify(eventList),
			        contentType: 'application/json',
                    url: 'AddTimesheet',						
                    success: function(data) {
                        console.log('success');
                        $("#save_msg").text(data);
                        $("#save_msg").css("color","green");
                    },
                    error: function(xhr, textStatus, errorThrown){
                    	$("#save_msg").text("Error saving timesheet. please try again later.");
                        $("#save_msg").css("color","red");
                     }
                });
    	console.log(JSON.stringify(eventList));
    });
    
  //Date picker
    $('#datepicker').datepicker({
    	todayHighlight: true,
    
    	autoclose: true,
      format: "dd/mm/yyyy"
    }).datepicker("setDate", new Date());
  
    var sheetObj = {}; 
    //$("#datepicker").datepicker().datepicker("setDate", new Date());
    sheetObj['date'] = $("#datepicker").val() ; 
	$("#sam1011").val(""); 
    $("#sam1112").val(""); 
    $("#spm1201").val("") ; 
    $("#spm0102").val("") ; 
    $("#spm0203").val(""); 
    $("#spm0304").val("") ; 
    $("#spm0405").val(""); 
    $("#spm0506").val(""); 
    $("#spm0607").val(""); 
    $("#sextra").val("");
	$.ajax({
		type: 'POST',
		data: JSON.stringify(sheetObj),
        contentType: 'application/json',
        url: 'GetWorkByDate',						
        success: function(data) {
        	 if (data.timeSheetData.length == 0 ) {
        	        console.log("NO DATA!")
        	    }
        	 else{
    	   $("#sam1011").val(data.timeSheetData[0].t10_11am); 
            $("#sam1112").val(data.timeSheetData[0].t11_12am); 
            $("#spm1201").val(data.timeSheetData[0].t12_1pm) ; 
            $("#spm0102").val(data.timeSheetData[0].t1_2pm) ; 
            $("#spm0203").val(data.timeSheetData[0].t2_3pm); 
            $("#spm0304").val(data.timeSheetData[0].t3_4pm) ; 
            $("#spm0405").val(data.timeSheetData[0].t4_5pm); 
            $("#spm0506").val(data.timeSheetData[0].t5_6pm); 
            $("#spm0607").val(data.timeSheetData[0].t6_7pm); 
            $("#sextra").val(data.timeSheetData[0].extra);
        	 }
        },
        error: function(xhr, textStatus, errorThrown){
        	console.log("Error fetching data");
         }
    });
    
    $('#datepicker').change(function(){
    	sheetObj['date'] = $("#datepicker").val() ; 
    	$("#sam1011").val(""); 
        $("#sam1112").val(""); 
        $("#spm1201").val("") ; 
        $("#spm0102").val("") ; 
        $("#spm0203").val(""); 
        $("#spm0304").val("") ; 
        $("#spm0405").val(""); 
        $("#spm0506").val(""); 
        $("#spm0607").val(""); 
        $("#sextra").val("");
    	$.ajax({
			type: 'POST',
			data: JSON.stringify(sheetObj),
	        contentType: 'application/json',
            url: 'GetWorkByDate',						
            success: function(data) {
            	 if (data.timeSheetData.length == 0 ) {
            	        console.log("NO DATA!")
            	    }
            	 else{
        	   $("#sam1011").val(data.timeSheetData[0].t10_11am); 
                $("#sam1112").val(data.timeSheetData[0].t11_12am); 
                $("#spm1201").val(data.timeSheetData[0].t12_1pm) ; 
                $("#spm0102").val(data.timeSheetData[0].t1_2pm) ; 
                $("#spm0203").val(data.timeSheetData[0].t2_3pm); 
                $("#spm0304").val(data.timeSheetData[0].t3_4pm) ; 
                $("#spm0405").val(data.timeSheetData[0].t4_5pm); 
                $("#spm0506").val(data.timeSheetData[0].t5_6pm); 
                $("#spm0607").val(data.timeSheetData[0].t6_7pm); 
                $("#sextra").val(data.timeSheetData[0].extra);
            	 }
            },
            error: function(xhr, textStatus, errorThrown){
            	console.log("Error fetching data");
             }
        });
    console.log(JSON.stringify(sheetObj));
     });
   	 
     
    
    $('#save-timesheet-shield').click(function(e){
    	
        //sheetObj['date'] = $("#datepicker").val() ; 
       
   		sheetObj['am1011'] = $("#sam1011").val() ; 
          
        sheetObj['am1112'] = $("#sam1112").val() ; 
         
        sheetObj['pm1201'] = $("#spm1201").val() ; 
            
        sheetObj['pm0102'] = $("#spm0102").val() ; 
           
        sheetObj['pm0203'] = $("#spm0203").val() ; 
         
        sheetObj['pm0304'] = $("#spm0304").val() ; 
       
        sheetObj['pm0405'] = $("#spm0405").val() ; 
          
        sheetObj['pm0506'] = $("#spm0506").val(); 
          
        sheetObj['pm0607'] = $("#spm0607").val() ; 
         
        sheetObj['extra'] = $("#sextra").val() ; 
   		
   		$.ajax({
					type: 'POST',
					data: JSON.stringify(sheetObj),
			        contentType: 'application/json',
                    url: 'AddTimesheetShield',						
                    success: function(data) {
                        console.log('success');
                        $("#save_msg_shield").text(data);
                        $("#save_msg_shield").css("color","green");
                    },
                    error: function(xhr, textStatus, errorThrown){
                    	$("#save_msg_shield").text("Error saving timesheet. please try again later.");
                        $("#save_msg_shield").css("color","red");
                     }
                });
    	console.log(JSON.stringify(sheetObj));
    });
  });
  

</script>

<script>
  $(function () {
    $("#example1").DataTable();
   /*  $('#example2').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": false,
      "ordering": true,
      "info": true,
      "autoWidth": false
    }); */
  });
</script>
</body>
</html>
